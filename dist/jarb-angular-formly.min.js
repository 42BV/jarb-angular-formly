"use strict";angular.module("jarb-angular-formly",[]),angular.module("jarb-angular-formly").factory("constraintsStore",["$http",function(a){function b(b){return a.get(b).then(function(a){var b=a.data;return d(b),a})}function c(){return f}function d(a){f=a,_.each(g,function(a){a(f)})}function e(a){function b(){var b=g.indexOf(a);g.splice(b,1)}return g.push(a),b}var f=null,g=[];return{loadConstraints:b,getConstraints:c,setConstraints:d,onConstraintsChanged:e}}]);var _slicedToArray=function(){function a(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=a[Symbol.iterator]();!(d=(g=h.next()).done)&&(c.push(g.value),!b||c.length!==b);d=!0);}catch(i){e=!0,f=i}finally{try{!d&&h.return&&h.return()}finally{if(e)throw f}}return c}return function(b,c){if(Array.isArray(b))return b;if(Symbol.iterator in Object(b))return a(b,c);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();angular.module("jarb-angular-formly").factory("jarbFormlyFieldTransformer",["constraintsStore","jarbRegex",function(a,b){function c(b,c,h){var i=a.getConstraints();return b.map(function(a){if(d(h)===!1)return a;var b=h.data.entityName+"."+a.key,c=e(b,i);if(c===!1)return a;c.required&&_.set(a,"templateOptions.required",!0),"java.lang.String"===c.javaType&&(c.minimumLength&&_.set(a,"templateOptions.minlength",c.minimumLength),c.maximumLength&&_.set(a,"templateOptions.maxlength",c.maximumLength)),c.min&&_.set(a,"templateOptions.min",c.min),c.max&&_.set(a,"templateOptions.max",c.max);var j=g(c.types);return f(j,c,a),a})}function d(a){var b=_.get(a,"data.entityName");return _.isEmpty(b)===!1}function e(a,b){var c=a.split("."),d=_slicedToArray(c,2),e=d[0],f=d[1],g=b[e];return!!g&&_.get(g,f,!1)}function f(a,c,d){var e=!1;"number"===a&&c.fractionLength>0?e=b.fractionNumberRegex(c.fractionLength):"number"===a&&(e=b.numberRegex()),e&&_.set(d,"templateOptions.pattern",b.convertRegexToFormlyPattern(e))}function g(a){for(var b=["color","datetime-local","datetime","month","week","date","time","email","tel","number","url","password","file","image","text"],c=0;c<a.length;c+=1)for(var d=a[c],e=0;e<b.length;e+=1){var f=b[e];if(d===f)return d}return"text"}return{transform:c}}]),angular.module("jarb-angular-formly").factory("jarbRegex",function(){function a(a){return new RegExp("^-?\\d+(\\.\\d{1,"+a+"})?$")}function b(){return/^-?\d+$/}function c(a){var b=""+a;return b.substring(1,b.length-1)}return{fractionNumberRegex:a,numberRegex:b,convertRegexToFormlyPattern:c}});